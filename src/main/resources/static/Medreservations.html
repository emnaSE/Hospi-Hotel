<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
    <link rel="icon" type="image/png" href="../assets/img/favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Light Bootstrap Dashboard - Free Bootstrap 4 Admin Dashboard by Creative Tim</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
        name='viewport' />
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />
    <!-- CSS Files -->
    <link href="../assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../assets/css/light-bootstrap-dashboard.css?v=2.0.0 " rel="stylesheet" />
    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link href="../assets/css/demo.css" rel="stylesheet" />
    <link href="../assets/css/design.css" rel="stylesheet" />
    <script src="../assets/js/cookies.js"></script>
    <script src="../assets/js/core/jquery.3.2.1.min.js" type="text/javascript"></script>
    <style>
    	.alert{
    		display:none;
    		width: 100%;
    		text-align: center;
    	}
    </style>
</head>

<body>
    <div class="wrapper">
        <div class="sidebar" data-image="../assets/img/sidebar-5.jpg">
            <!--
        Tip 1: You can change the color of the sidebar using: data-color="purple | blue | green | orange | red"

        Tip 2: you can also add an image using data-image tag
    -->
            <div class="sidebar-wrapper">
                <div class="logo">
                    <a href="#" class="simple-text">
                        Hospi-Hotel
                    </a>
                </div>
                <ul class="nav" id="sideNav">
                    <li>
                        <a class="nav-link" href="dashboardMed.html">
                            <i class="nc-icon nc-chart-pie-35"></i>
                            <p>Tableau De Bord</p>
                        </a>
                    </li>
                    <li>
                        <a class="nav-link" href="./medecin.html">
                            <i class="nc-icon nc-circle-09"></i>
                            <p>Profile</p>
                        </a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="Medreservations.html">
                            <i class="nc-icon nc-notes"></i>
                            <p>Mes Réservations</p>
                        </a>
                    </li>

                    <li>
                        <a class="nav-link" href="./reserver.html">
                            <i class="nc-icon nc-atom"></i>
                            <p>Réserver</p>
                        </a>
                    </li>
                    <li>
                        <a class="nav-link" href="./MedNotifications.html">
                            <i class="nc-icon nc-bell-55"></i>
                            <p>Notifications</p>
                        </a>
                    </li>

                </ul>
            </div>
        </div>
        <div class="main-panel">
            <!-- Navbar -->
            <nav class="navbar navbar-expand-lg " color-on-scroll="500">
                <div class="container-fluid">
                    <a class="navbar-brand" href="#pablo">Tableau De Bord</a>
                    <button href="" class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
                        aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-bar burger-lines"></span>
                        <span class="navbar-toggler-bar burger-lines"></span>
                        <span class="navbar-toggler-bar burger-lines"></span>
                    </button>
                    <div class="collapse navbar-collapse justify-content-end" id="navigation">
                        <ul class="nav navbar-nav mr-auto">
                            <li class="nav-item">
                                <a href="#" class="nav-link" data-toggle="dropdown">
                                    <i class="nc-icon nc-palette"></i>
                                    <span class="d-lg-none">Tableau De Bord</span>
                                </a>
                            </li>
                            <li class="dropdown nav-item">
                                <a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">
                                    <i class="nc-icon nc-planet"></i>
                                    <span class="notification">5</span>
                                    <span class="d-lg-none">Notification</span>
                                </a>
                                <ul class="dropdown-menu">
                                    <a class="dropdown-item" href="#">Notification 1</a>
                                    <a class="dropdown-item" href="#">Notification 2</a>
                                    <a class="dropdown-item" href="#">Notification 3</a>
                                    <a class="dropdown-item" href="#">Notification 4</a>
                                    <a class="dropdown-item" href="#">Another notification</a>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    <i class="nc-icon nc-zoom-split"></i>
                                    <span class="d-lg-block">&nbsp;Rechercher</span>
                                </a>
                            </li>
                        </ul>
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="#pablo">
                                    <span class="no-icon">Compte</span>
                                </a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="http://example.com"
                                    id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true"
                                    aria-expanded="false">
                                    <span class="no-icon">Info</span>
                                </a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                    <a class="dropdown-item" href="#">Action</a>
                                    <a class="dropdown-item" href="#">Another action</a>
                                    <a class="dropdown-item" href="#">Something</a>
                                    <a class="dropdown-item" href="#">Something else here</a>
                                    <div class="divider"></div>
                                    <a class="dropdown-item" href="#">Separated link</a>
                                </div>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#pablo">
                                    <span class="no-icon">Se Déconnecter</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <!-- End Navbar -->
            <div class="content">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="card strpied-tabled-with-hover">
                                <div class="card-header ">
                                    <h4 class="card-title">Réservations en cours</h4>
                                    <p class="card-category">Réservations</p>
                                    <div class="alert alert-success" role="alert" id="succes">
									  La réservation a été Annulé avec succès !
									</div>
									<div class="alert alert-danger" role="alert" id="fail">
									  Echec Lors de l'annulation de la réservation !
									</div>
                                </div>
                                <div class="card-body table-full-width table-responsive">
                                    <table class="table table-hover table-striped">
                                        <thead>
                                            <th>Nom Hotel</th>
                                            <th>Nom Patient</th>
                                            <th>Date Début</th>
                                            <th>Date Fin</th>
                                            <th>Nombre de lits</th>
                                            <th>État</th>
                                        </thead>
                                        <tbody id="tableBody">
                                            
                                            
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
    </div>
    <!--   -->
    <!-- <div class="fixed-plugin">
    <div class="dropdown show-dropdown">
        <a href="#" data-toggle="dropdown">
            <i class="fa fa-cog fa-2x"> </i>
        </a>

        <ul class="dropdown-menu">
			<li class="header-title"> Sidebar Style</li>
            <li class="adjustments-line">
                <a href="javascript:void(0)" class="switch-trigger">
                    <p>Background Image</p>
                    <label class="switch">
                        <input type="checkbox" data-toggle="switch" checked="" data-on-color="primary" data-off-color="primary"><span class="toggle"></span>
                    </label>
                    <div class="clearfix"></div>
                </a>
            </li>
            <li class="adjustments-line">
                <a href="javascript:void(0)" class="switch-trigger background-color">
                    <p>Filters</p>
                    <div class="pull-right">
                        <span class="badge filter badge-black" data-color="black"></span>
                        <span class="badge filter badge-azure" data-color="azure"></span>
                        <span class="badge filter badge-green" data-color="green"></span>
                        <span class="badge filter badge-orange" data-color="orange"></span>
                        <span class="badge filter badge-red" data-color="red"></span>
                        <span class="badge filter badge-purple active" data-color="purple"></span>
                    </div>
                    <div class="clearfix"></div>
                </a>
            </li>
            <li class="header-title">Sidebar Images</li>

            <li class="active">
                <a class="img-holder switch-trigger" href="javascript:void(0)">
                    <img src="../assets/img/sidebar-1.jpg" alt="" />
                </a>
            </li>
            <li>
                <a class="img-holder switch-trigger" href="javascript:void(0)">
                    <img src="../assets/img/sidebar-3.jpg" alt="" />
                </a>
            </li>
            <li>
                <a class="img-holder switch-trigger" href="javascript:void(0)">
                    <img src="..//assets/img/sidebar-4.jpg" alt="" />
                </a>
            </li>
            <li>
                <a class="img-holder switch-trigger" href="javascript:void(0)">
                    <img src="../assets/img/sidebar-5.jpg" alt="" />
                </a>
            </li>

            <li class="button-container">
                <div class="">
                    <a href="http://www.creative-tim.com/product/light-bootstrap-dashboard" target="_blank" class="btn btn-info btn-block btn-fill">Download, it's free!</a>
                </div>
            </li>

            <li class="header-title pro-title text-center">Want more components?</li>

            <li class="button-container">
                <div class="">
                    <a href="http://www.creative-tim.com/product/light-bootstrap-dashboard-pro" target="_blank" class="btn btn-warning btn-block btn-fill">Get The PRO Version!</a>
                </div>
            </li>

            <li class="header-title" id="sharrreTitle">Thank you for sharing!</li>

            <li class="button-container">
				<button id="twitter" class="btn btn-social btn-outline btn-twitter btn-round sharrre"><i class="fa fa-twitter"></i> · 256</button>
                <button id="facebook" class="btn btn-social btn-outline btn-facebook btn-round sharrre"><i class="fa fa-facebook-square"></i> · 426</button>
            </li>
        </ul>
    </div>
</div>
 -->
 
 
 <script type="text/javascript">



 jQuery(document).ready(function(){
	 /***********/
	$('form').submit(function(e){
			e.preventDefault();
			alert("hello");
		    var form = $(this);
		    var url = form.attr('action');

		    $.ajax({
		           type: "GET",
		           url: url,
		           data: form.serialize(),
		           success: function(data)
		           {
		        	   alert("hello");
		        	   form.last().css( "background-color", "blue" );
		        	   form.last().html( "Annulé" );
		        	   $('#succes').css('display','block');
		           }
		         });

		});
	 /**************/
		var reservations;
		var acookie = getCookieByName("userInfo");
		$.ajax({
	        type: "GET",
	        url: "/getOnlyoneReservationbyname",
	        type : 'GET',
	        data : 'name='+JSON.parse(acookie).username,
	        success: function(data)
	        {
	          	reservations=JSON.stringify(data);
	           	reservations = JSON.parse(reservations);
	   			fillTable();
	        }
	      });
		
		function fillTable(){
			for(var i=0;i<reservations.length;i++){
				var tr = document.createElement('tr')
				var td1 = document.createElement('td');
				td1.textContent=reservations[i].nomHotel;
				tr.append(td1);
				var td2 = document.createElement('td');
				td2.textContent=reservations[i].nomPatient;
				tr.append(td2);
				var td3 = document.createElement('td');
				td3.textContent=reservations[i].date_Deb;
				tr.append(td3);
				var td4 = document.createElement('td');
				td4.textContent=reservations[i].date_Fin;
				tr.append(td4);
				var td5 = document.createElement('td');
				td5.textContent=reservations[i].nb_lits_res;
				tr.append(td5);
				var td6 = document.createElement('td');
				switch (reservations[i].etat) {
				case 1:
					var button= $('<button type="button" style="background-color:#d8d214;border-radius:5px;pointer-events:none">Accepté</button>');
					button.appendTo(td6);
					break;
				case 2:
					var button= $('<button type="button" style="background-color:#d8d214;border-radius:5px;disabled:true;pointer-events:none">Refusé</button>');
					button.appendTo(td6);
					break;
				case 3:
					var button= $('<button type="button" style="background-color:#d8d214;border-radius:5px;disabled:true;pointer-events:none">Annulé</button>');
					button.appendTo(td6);
					break;
				default:
					var form=$('<form method="GET" class="formAnnul" action="/EtatCancelled"></form>');
					var hiddenId=$('<input type="text" style="display:none" name="id" value="'+reservations[i].id+'">');
					var button= $('<button type="submit" style="background-color:#d8d214;border-radius:5px">En cours</button>');
					hiddenId.appendTo(form);
					button.appendTo(form);
					form.appendTo(td6);
					button.mouseenter(function() {
					    $(this).html("Annuler");
					    $(this).css("background-color", "#75ff3b");
					}).mouseleave(function() {
						$(this).html("En cours");
						$(this).css("background-color", "#d8d214");
					});
				}
				tr.append(td6);
				$('#tableBody').append(tr);
			}
		}
	
		
	/***********/

		/********** 5edmet mohamed 
		var jqxhr = $.get( "getReservation?medecin="+idMed, function() {
			
			})
			  .done(function(data){
			  	alert(JSON.stringify(data));
			  	//var info=JSON.stringify(data);
			  	var i=0;
			  	alert(JSON.stringify(data.length));
			  	console.log(data[0]);
			  	for(i=0;i<data.length; i++)
                 {
			  		
                   
                  //document.getElementById("nom").innerHTML=data.id;
			  		$("#name").html(data[i].name);
			  	
			  		$("#nb_Lits").html(data[i].nb_Lits);
			  		$("#bookdate").html(data[i].bookDate);
			  		//$("#nam").html(data[nomHotel].name);
			  		
			  		 
                    
                  
                 }

			  	
			  })
			  .fail(function() {
			   
			  })
			  .always(function() {
			   
			  });
			 
			
			//jqxhr.always(function() {
			
			//}); 

		*********/
	});

</script>
 
 
</body>
<!--   Core JS Files   -->

<script src="../assets/js/core/popper.min.js" type="text/javascript"></script>
<script src="../assets/js/core/bootstrap.min.js" type="text/javascript"></script>
<!--  Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/ -->
<script src="../assets/js/plugins/bootstrap-switch.js"></script>
<!--  Google Maps Plugin    -->
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>
<!--  Chartist Plugin  -->
<script src="../assets/js/plugins/chartist.min.js"></script>
<!--  Notifications Plugin    -->
<script src="../assets/js/plugins/bootstrap-notify.js"></script>
<!-- Control Center for Light Bootstrap Dashboard: scripts for the example pages etc -->
<script src="../assets/js/light-bootstrap-dashboard.js?v=2.0.0 " type="text/javascript"></script>
<!-- Light Bootstrap Dashboard DEMO methods, don't include it in your project! -->
<script src="../assets/js/demo.js"></script>

</html>